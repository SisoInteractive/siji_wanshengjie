<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

<img src="" alt="" id="img"/>
<script>
var showPicture = document.getElementById('img').src = getURLParameter('img');

try {
    // Get window.URL object
    var URL = window.URL || window.webkitURL;

    // Create ObjectURL
    var imgURL = URL.createObjectURL(getURLParameter('img'));

    // Set img src to ObjectURL
    showPicture.src = imgURL;

    // Revoke ObjectURL after imagehas loaded
    showPicture.onload = function() {
        URL.revokeObjectURL(imgURL);
        document.getElementById('share').href = "http://192.168.0.23:8081/read.html?img=" + showPicture.src;
    };
}
catch (e) {
    try {
        // Fallback if createObjectURL is not supported
        var fileReader = new FileReader();
        fileReader.onload = function (event) {
            showPicture.src = event.target.result;
            document.getElementById('share').href = "http://192.168.0.23:8081/read.html?img=" + event.target.result;
        };
        fileReader.readAsDataURL(file);
    }
    catch (e) {
        // Display error message
        var error = document.querySelector("#error");
        if (error) {
            error.innerHTML = "Neither createObjectURL or FileReader are supported";
        }
    }
}

function getURLParameter(name) {
    return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null
}
</script>
</body>
</html>